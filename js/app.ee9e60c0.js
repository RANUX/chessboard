(function(t){function e(e){for(var n,i,r=e[0],c=e[1],u=e[2],O=0,_=[];O<r.length;O++)i=r[O],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&_.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(_.length)_.shift()();return a.push.apply(a,u||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,r=1;r<o.length;r++){var c=o[r];0!==s[c]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},s={app:0},a=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},"0726":function(t,e,o){},"1d59":function(t,e,o){},"1f1a":function(t,e,o){"use strict";o("e287")},3140:function(t,e,o){},"315e":function(t,e,o){},"52f6":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d"),o("f5df1");var n,s,a,i=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("AppHeader",{on:{"logo-click":t.onLogoClick}}),t.isStartState?o("Start",{on:{start:t.onStart}}):t._e(),t.isGameState?o("Game"):t._e()],1)},c=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{src:o("cf05")},on:{click:t.onLogo}})])},l=[],O="chessboard",_={actions:{TOGGLE_HIGHLITE_MOVES:"".concat(O,"/TOGGLE_HIGHLITE_MOVES"),TOGGLE_ONLY_CORRECT_MOVES:"".concat(O,"/TOGGLE_ONLY_CORRECT_MOVES"),TOGGLE_SHOW_HISTORY:"".concat(O,"/TOGGLE_SHOW_HISTORY"),SET_ONLY_CORRECT_MOVES:"".concat(O,"/SET_ONLY_CORRECT_MOVES"),UPDATE_POSITION:"".concat(O,"/UPDATE_POSITION"),PUSH_MOVE:"".concat(O,"/PUSH_MOVE"),CLEAR_MOVES:"".concat(O,"/CLEAR_MOVES"),SET_POSITION_TYPE:"".concat(O,"/SET_POSITION_TYPE")},mutations:{SET_HIGHLITE_MOVES:"".concat(O,"/SET_HIGHLITE_MOVES"),SET_ONLY_CORRECT_MOVES:"".concat(O,"/SET_ONLY_CORRECT_MOVES"),SET_SHOW_HISTORY:"".concat(O,"/SET_SHOW_HISTORY"),SET_POSITION:"".concat(O,"/SET_POSITION"),PUSH_MOVE:"".concat(O,"/PUSH_MOVE"),SET_POSITION_TYPE:"".concat(O,"/SET_POSITION_TYPE"),CLEAR_MOVES:"".concat(O,"/CLEAR_MOVES")},getters:{GET_HIGHLITE_MOVES:"".concat(O,"/GET_HIGHLITE_MOVES"),GET_ONLY_CORRECT_MOVES:"".concat(O,"/GET_ONLY_CORRECT_MOVES"),GET_SHOW_HISTORY:"".concat(O,"/GET_SHOW_HISTORY"),GET_POSITION:"".concat(O,"/GET_POSITION"),GET_MOVES:"".concat(O,"/GET_MOVES"),GET_POSITION_TYPE:"".concat(O,"/GET_POSITION_TYPE")}},S={name:"AppHeader",methods:{onLogo:function(){this.$store.dispatch(_.actions.SET_POSITION_TYPE,"fen"),this.$emit("logo-click")}}},E=S,T=(o("6da7"),o("2877")),d=Object(T["a"])(E,u,l,!1,null,"e9e7b742",null),h=d.exports,f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"game"},[o("ChessBoard"),t.showHistory?o("MovesRecord"):t._e()],1)},g=[],p=o("5530"),v=o("2f62"),b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticStyle:{width:"480px",height:"480px"},attrs:{id:"board"}})])}],C=(o("ac1f"),o("841c"),o("c5ad")),I=o.n(C),M=o("1157"),H=o.n(M),G={name:"ChessBoard",data:function(){return{board:null,game:new I.a}},computed:Object(p["a"])({},Object(v["c"])({highlightMoves:_.getters.GET_HIGHLITE_MOVES,onlyCorrectMoves:_.getters.GET_ONLY_CORRECT_MOVES,position:_.getters.GET_POSITION,positionType:_.getters.GET_POSITION_TYPE})),mounted:function(){!window||window.ChessBoard?!window||window.$?this.createChessboard():console.error("Missing window.$"):console.error("Missing window.ChessBoard!")},methods:{removeGreySquares:function(){H()("#board .square-55d63").css("background","")},greySquare:function(t){var e="#a9a9a9",o="#696969",n=H()("#board .square-"+t),s=e;n.hasClass("black-3c85d")&&(s=o),n.css("background",s)},onDragStart:function(t,e){return!this.game.game_over()&&(!("w"===this.game.turn()&&-1!==e.search(/^b/)||"b"===this.game.turn()&&-1!==e.search(/^w/))&&void 0)},onDrop:function(t,e){this.logMove(e),this.removeGreySquares();var o=this.game.move({from:t,to:e,promotion:"q"});if(null===o)return"snapback"},onMouseoverSquare:function(t){if(this.highlightMoves){var e=this.game.moves({square:t,verbose:!0});if(0!==e.length){this.greySquare(t);for(var o=0;o<e.length;o++)this.greySquare(e[o].to)}}},onMouseoutSquare:function(){this.removeGreySquares()},onSnapEnd:function(){this.board.position(this.game.fen())},onChange:function(t,e){this.$store.dispatch(_.actions.UPDATE_POSITION,window.Chessboard.objToFen(e))},createChessboard:function(){var t=this;"start"===this.positionType&&(this.$store.dispatch(_.actions.UPDATE_POSITION,""),this.$store.dispatch(_.actions.CLEAR_MOVES));var e={pieceTheme:"/js/chessboardjs/img/chesspieces/wikipedia/{piece}.png",draggable:!0,onChange:this.onChange},o={onDragStart:this.onDragStart,onDrop:this.onDrop,onMouseoutSquare:this.onMouseoutSquare,onMouseoverSquare:this.onMouseoverSquare,onSnapEnd:this.onSnapEnd};switch(this.positionType){case"start":e=Object(p["a"])(Object(p["a"])({},e),{},{position:this.position?this.position:"start",onDrop:function(e,o){return t.logMove(o)}}),this.onlyCorrectMoves&&(e=Object(p["a"])(Object(p["a"])({},e),o));break;case"fen":break;case"arbitrary":e=Object(p["a"])(Object(p["a"])({},e),{},{dropOffBoard:"trash",sparePieces:!0});break}this.board=window.Chessboard("board",e),this.position&&this.board.position(this.position)},logMove:function(t){this.$store.dispatch(_.actions.PUSH_MOVE,t)}}},P=G,y=Object(T["a"])(P,b,m,!1,null,null,null),R=y.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"moves-record"},[o("div",{staticClass:"title"},[t._v("Запись партии")]),o("div",{staticClass:"table"},t._l(t.moves,(function(e,n){return o("div",{key:n,staticClass:"row"},[o("div",{staticClass:"cell"},[t._v(t._s(n+1)+".")]),o("div",{staticClass:"cell"},[t._v(t._s(e[0]))]),o("div",{staticClass:"cell"},[t._v(t._s(e[1]))])])})),0)])},L=[],V=(o("a434"),{name:"MovesRecord",computed:{moves:function(){var t=this.$store.getters[_.getters.GET_MOVES](),e=[];while(t.length)e.push(t.splice(0,2));return e}}}),w=V,N=(o("ebc5"),Object(T["a"])(w,j,L,!1,null,"3cd43420",null)),Y=N.exports,k={name:"Game",components:{ChessBoard:R,MovesRecord:Y},computed:Object(p["a"])({},Object(v["c"])({showHistory:_.getters.GET_SHOW_HISTORY}))},$=k,x=(o("c909"),Object(T["a"])($,f,g,!1,null,"9a5aec7a",null)),A=x.exports,q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"start"},[o("div",{staticClass:"start-logo"}),o("Settings"),o("button",{staticClass:"start-button",attrs:{type:"button"},on:{click:function(e){return t.$emit("start")}}},[t._v("Начать")])],1)},B=[],D=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"settings"},[o("div",{staticClass:"settings-title"},[t._v("Режим тренировки")]),o("div",{staticClass:"toggles"},[o("ToggleButton",{attrs:{label:"Подсвечивать возможные ходы",defaultState:t.highlightMoves},on:{toggle:t.onToggleHighlightMoves}}),o("ToggleButton",{attrs:{label:"Допускать только корректные ходы",defaultState:t.onlyCorrectMoves},on:{toggle:t.onToggleOnlyCorrectMoves}}),o("ToggleButton",{attrs:{label:"Показывать историю ходов",defaultState:t.showHistory},on:{toggle:t.onToggleShowHistory}})],1),o("div",{staticClass:"position-select"},[o("PositionSelect")],1)])},U=[],W=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"toggle__button",class:{active:t.isActive},attrs:{for:t.id+"_button"}},[o("span",{staticClass:"toggle__label"},[t._v(t._s(t.label))]),o("input",{attrs:{type:"checkbox",disabled:t.disabled,id:t.id+"_button"},on:{click:t.onToggle}}),o("span",{staticClass:"toggle__switch"})])},F=[],J={name:"ToggleButton",props:{disabled:{type:Boolean,default:!1},label:{type:String,default:""},defaultState:{type:Boolean,default:!1},locked:{type:Boolean,default:!1}},mounted:function(){this.id=this._uid,this.currentState=this.defaultState},data:function(){return{id:null,currentState:!0}},computed:{isActive:function(){return this.currentState},enableText:function(){return this.labelEnableText},disabledText:function(){return this.labelDisableText}},methods:{onToggle:function(){this.locked||(this.currentState=!this.currentState,this.$emit("toggle",this.currentState))}},watch:{defaultState:function(){this.currentState=Boolean(this.defaultState)}}},z=J,K=(o("fcde"),Object(T["a"])(z,W,F,!1,null,"2c6e7517",null)),Q=K.exports,X=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"position"},[o("div",{staticClass:"title"},[t._v("Начальная позиция")]),o("div",{staticClass:"radio-toolbar"},[o("input",{attrs:{type:"radio",id:"radioStart",name:"radioPosition",value:"start"},domProps:{checked:t.isSelected("start")}}),o("label",{attrs:{for:"radioStart"},on:{click:function(e){return t.onSelect("start")}}},[t._v("Стартовая")]),o("input",{attrs:{type:"radio",id:"radioFen",name:"radioPosition",value:"fen"},domProps:{checked:t.isSelected("fen")}}),o("label",{attrs:{for:"radioFen"},on:{click:function(e){return t.onSelect("fen")}}},[t._v("Заданная")]),o("input",{attrs:{type:"radio",id:"radioArbitrary",name:"radioPosition",value:"orange"},domProps:{checked:t.isSelected("arbitrary")}}),o("label",{attrs:{for:"radioArbitrary"},on:{click:function(e){return t.onSelect("arbitrary")}}},[t._v("Произвольная")])])])},Z=[],tt={name:"PositionSelect",computed:Object(p["a"])({},Object(v["c"])({positionType:_.getters.GET_POSITION_TYPE})),methods:{isSelected:function(t){return this.positionType===t},onSelect:function(t){this.$store.dispatch(_.actions.SET_POSITION_TYPE,t)}}},et=tt,ot=(o("9223"),Object(T["a"])(et,X,Z,!1,null,"61f920c0",null)),nt=ot.exports,st={name:"Settings",components:{ToggleButton:Q,PositionSelect:nt},computed:Object(p["a"])({},Object(v["c"])({highlightMoves:_.getters.GET_HIGHLITE_MOVES,onlyCorrectMoves:_.getters.GET_ONLY_CORRECT_MOVES,showHistory:_.getters.GET_SHOW_HISTORY})),methods:Object(p["a"])(Object(p["a"])({},Object(v["b"])({onToggleHighlightMoves:_.actions.TOGGLE_HIGHLITE_MOVES,onToggleShowHistory:_.actions.TOGGLE_SHOW_HISTORY})),{},{onToggleOnlyCorrectMoves:function(){this.$store.dispatch(_.actions.TOGGLE_ONLY_CORRECT_MOVES),this.setActiveCorrectMoves=!1}}),watch:{highlightMoves:function(){this.highlightMoves&&this.$store.dispatch(_.actions.SET_ONLY_CORRECT_MOVES,!0)}}},at=st,it=(o("1f1a"),Object(T["a"])(at,D,U,!1,null,"dd5b40ea",null)),rt=it.exports,ct={name:"Start",components:{Settings:rt}},ut=ct,lt=(o("fe88"),Object(T["a"])(ut,q,B,!1,null,"240c4076",null)),Ot=lt.exports,_t={name:"app",components:{Game:A,Start:Ot,AppHeader:h},data:function(){return{state:"start"}},computed:{isGameState:function(){return"game"===this.state},isStartState:function(){return"start"===this.state}},methods:{onStart:function(){this.state="game"},onLogoClick:function(){this.state="start"}}},St=_t,Et=(o("034f"),Object(T["a"])(St,r,c,!1,null,null,null)),Tt=Et.exports,dt=o("2909"),ht=o("ade3"),ft={highlightMoves:!0,onlyCorrectMoves:!0,showHistory:!0,moves:[],position:"",positionType:"start"},gt=Object(p["a"])({},ft),pt=(n={},Object(ht["a"])(n,_.actions.TOGGLE_HIGHLITE_MOVES,(function(t){var e=t.commit,o=t.state;e(_.mutations.SET_HIGHLITE_MOVES,!o.highlightMoves)})),Object(ht["a"])(n,_.actions.TOGGLE_ONLY_CORRECT_MOVES,(function(t){var e=t.commit,o=t.state;e(_.mutations.SET_ONLY_CORRECT_MOVES,!o.onlyCorrectMoves)})),Object(ht["a"])(n,_.actions.TOGGLE_SHOW_HISTORY,(function(t){var e=t.commit,o=t.state;e(_.mutations.SET_SHOW_HISTORY,!o.showHistory)})),Object(ht["a"])(n,_.actions.SET_ONLY_CORRECT_MOVES,(function(t,e){var o=t.commit;o(_.mutations.SET_ONLY_CORRECT_MOVES,e)})),Object(ht["a"])(n,_.actions.UPDATE_POSITION,(function(t,e){var o=t.commit;o(_.mutations.SET_POSITION,e)})),Object(ht["a"])(n,_.actions.PUSH_MOVE,(function(t,e){var o=t.commit;o(_.mutations.PUSH_MOVE,e)})),Object(ht["a"])(n,_.actions.SET_POSITION_TYPE,(function(t,e){var o=t.commit;"start"!==e&&(o(_.mutations.SET_HIGHLITE_MOVES,!1),o(_.mutations.SET_ONLY_CORRECT_MOVES,!1)),o(_.mutations.SET_POSITION_TYPE,e)})),Object(ht["a"])(n,_.actions.CLEAR_MOVES,(function(t){var e=t.commit;e(_.mutations.CLEAR_MOVES)})),n),vt=(s={},Object(ht["a"])(s,_.mutations.SET_HIGHLITE_MOVES,(function(t,e){t.highlightMoves=e})),Object(ht["a"])(s,_.mutations.SET_ONLY_CORRECT_MOVES,(function(t,e){t.onlyCorrectMoves=e})),Object(ht["a"])(s,_.mutations.SET_SHOW_HISTORY,(function(t,e){t.showHistory=e})),Object(ht["a"])(s,_.mutations.SET_POSITION,(function(t,e){t.position=e})),Object(ht["a"])(s,_.mutations.SET_POSITION_TYPE,(function(t,e){t.positionType=e})),Object(ht["a"])(s,_.mutations.PUSH_MOVE,(function(t,e){t.moves.push(e)})),Object(ht["a"])(s,_.mutations.CLEAR_MOVES,(function(t){t.moves=[]})),s),bt=(a={},Object(ht["a"])(a,_.getters.GET_HIGHLITE_MOVES,(function(t){var e=t.highlightMoves;return e})),Object(ht["a"])(a,_.getters.GET_ONLY_CORRECT_MOVES,(function(t){var e=t.onlyCorrectMoves;return e})),Object(ht["a"])(a,_.getters.GET_SHOW_HISTORY,(function(t){var e=t.showHistory;return e})),Object(ht["a"])(a,_.getters.GET_POSITION,(function(t){var e=t.position;return e})),Object(ht["a"])(a,_.getters.GET_POSITION_TYPE,(function(t){var e=t.positionType;return e})),Object(ht["a"])(a,_.getters.GET_MOVES,(function(t){var e=t.moves;return function(){return Object(dt["a"])(e)}})),a),mt={state:gt,mutations:vt,actions:pt,getters:bt};i["a"].use(v["a"]);var Ct=new v["a"].Store({modules:{chessboard:mt}});i["a"].config.productionTip=!1,new i["a"]({store:Ct,render:function(t){return t(Tt)}}).$mount("#app")},"6da7":function(t,e,o){"use strict";o("52f6")},"85ec":function(t,e,o){},9223:function(t,e,o){"use strict";o("0726")},c909:function(t,e,o){"use strict";o("1d59")},cf05:function(t,e,o){t.exports=o.p+"img/logo.6803e06a.png"},da59:function(t,e,o){},e287:function(t,e,o){},ebc5:function(t,e,o){"use strict";o("da59")},fcde:function(t,e,o){"use strict";o("3140")},fe88:function(t,e,o){"use strict";o("315e")}});
//# sourceMappingURL=app.ee9e60c0.js.map