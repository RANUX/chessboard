(function(t){function e(e){for(var n,i,r=e[0],c=e[1],u=e[2],O=0,_=[];O<r.length;O++)i=r[O],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&_.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(_.length)_.shift()();return a.push.apply(a,u||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,r=1;r<o.length;r++){var c=o[r];0!==s[c]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},s={app:0},a=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/chessboard/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},"194d":function(t,e,o){},3020:function(t,e,o){},"4add":function(t,e,o){"use strict";o("fed0")},"52f6":function(t,e,o){},"53e6":function(t,e,o){"use strict";o("9980")},"565e":function(t,e,o){"use strict";o("d81b")},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d"),o("f5df1");var n,s,a,i=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("AppHeader",{on:{"logo-click":t.onLogoClick}}),t.isStartState?o("Start",{on:{start:t.onStart}}):t._e(),t.isGameState?o("Game"):t._e()],1)},c=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{src:o("cf05")},on:{click:t.onLogo}})])},l=[],O="chessboard",_={actions:{TOGGLE_HIGHLITE_MOVES:"".concat(O,"/TOGGLE_HIGHLITE_MOVES"),TOGGLE_ONLY_CORRECT_MOVES:"".concat(O,"/TOGGLE_ONLY_CORRECT_MOVES"),TOGGLE_SHOW_HISTORY:"".concat(O,"/TOGGLE_SHOW_HISTORY"),SET_ONLY_CORRECT_MOVES:"".concat(O,"/SET_ONLY_CORRECT_MOVES"),UPDATE_POSITION:"".concat(O,"/UPDATE_POSITION"),PUSH_MOVE:"".concat(O,"/PUSH_MOVE"),CLEAR_MOVES:"".concat(O,"/CLEAR_MOVES"),SET_POSITION_TYPE:"".concat(O,"/SET_POSITION_TYPE")},mutations:{SET_HIGHLITE_MOVES:"".concat(O,"/SET_HIGHLITE_MOVES"),SET_ONLY_CORRECT_MOVES:"".concat(O,"/SET_ONLY_CORRECT_MOVES"),SET_SHOW_HISTORY:"".concat(O,"/SET_SHOW_HISTORY"),SET_POSITION:"".concat(O,"/SET_POSITION"),PUSH_MOVE:"".concat(O,"/PUSH_MOVE"),SET_POSITION_TYPE:"".concat(O,"/SET_POSITION_TYPE"),CLEAR_MOVES:"".concat(O,"/CLEAR_MOVES")},getters:{GET_HIGHLITE_MOVES:"".concat(O,"/GET_HIGHLITE_MOVES"),GET_ONLY_CORRECT_MOVES:"".concat(O,"/GET_ONLY_CORRECT_MOVES"),GET_SHOW_HISTORY:"".concat(O,"/GET_SHOW_HISTORY"),GET_POSITION:"".concat(O,"/GET_POSITION"),GET_MOVES:"".concat(O,"/GET_MOVES"),GET_POSITION_TYPE:"".concat(O,"/GET_POSITION_TYPE")}},S={name:"AppHeader",methods:{onLogo:function(){this.$store.dispatch(_.actions.SET_POSITION_TYPE,"fen"),this.$emit("logo-click")}}},E=S,d=(o("6da7"),o("2877")),T=Object(d["a"])(E,u,l,!1,null,"e9e7b742",null),f=T.exports,h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"game"},[o("ChessBoard"),o("div",{staticClass:"shift-right"},[t.showHistory?o("MovesRecord"):t._e()],1)],1)},p=[],b=o("5530"),g=o("2f62"),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"board",attrs:{id:"board"}}),t.isArbitraryPosition?o("div",[o("button",{staticClass:"clear-button",attrs:{type:"button"},on:{click:t.clearBoard}},[t._v("Очистить доску")])]):t._e()])},m=[],I=(o("ac1f"),o("841c"),o("c5ad")),C=o.n(I),M=o("1157"),H=o.n(M),P={name:"ChessBoard",data:function(){return{board:null,game:new C.a}},computed:Object(b["a"])(Object(b["a"])({},Object(g["c"])({highlightMoves:_.getters.GET_HIGHLITE_MOVES,onlyCorrectMoves:_.getters.GET_ONLY_CORRECT_MOVES,position:_.getters.GET_POSITION,positionType:_.getters.GET_POSITION_TYPE})),{},{isArbitraryPosition:function(){return"arbitrary"===this.positionType}}),mounted:function(){!window||window.ChessBoard?!window||window.$?this.createChessboard():console.error("Missing window.$"):console.error("Missing window.ChessBoard!")},methods:{removeGreySquares:function(){H()("#board .square-55d63").css("background","")},greySquare:function(t){var e="#a9a9a9",o="#696969",n=H()("#board .square-"+t),s=e;n.hasClass("black-3c85d")&&(s=o),n.css("background",s)},onDragStart:function(t,e){return!this.game.game_over()&&(!("w"===this.game.turn()&&-1!==e.search(/^b/)||"b"===this.game.turn()&&-1!==e.search(/^w/))&&void 0)},onDrop:function(t,e){this.logMove(e),this.removeGreySquares();var o=this.game.move({from:t,to:e,promotion:"q"});if(null===o)return"snapback"},onMouseoverSquare:function(t){if(this.highlightMoves){var e=this.game.moves({square:t,verbose:!0});if(0!==e.length){this.greySquare(t);for(var o=0;o<e.length;o++)this.greySquare(e[o].to)}}},onMouseoutSquare:function(){this.removeGreySquares()},onSnapEnd:function(){this.board.position(this.game.fen())},onChange:function(t,e){this.$store.dispatch(_.actions.UPDATE_POSITION,window.Chessboard.objToFen(e))},createChessboard:function(){var t=this;"start"===this.positionType&&(this.$store.dispatch(_.actions.UPDATE_POSITION,""),this.$store.dispatch(_.actions.CLEAR_MOVES));var e={pieceTheme:"js/chessboardjs/img/chesspieces/wikipedia/{piece}.png",draggable:!0,onChange:this.onChange},o={onDragStart:this.onDragStart,onDrop:this.onDrop,onMouseoutSquare:this.onMouseoutSquare,onMouseoverSquare:this.onMouseoverSquare,onSnapEnd:this.onSnapEnd};switch(this.positionType){case"start":e=Object(b["a"])(Object(b["a"])({},e),{},{position:this.position?this.position:"start",onDrop:function(e,o){return t.logMove(o)}}),this.onlyCorrectMoves&&(e=Object(b["a"])(Object(b["a"])({},e),o));break;case"fen":break;case"arbitrary":e=Object(b["a"])(Object(b["a"])({},e),{},{dropOffBoard:"trash",sparePieces:!0});break}this.board=window.Chessboard("board",e),this.position&&this.board.position(this.position)},logMove:function(t){this.$store.dispatch(_.actions.PUSH_MOVE,t)},clearBoard:function(){this.$store.dispatch(_.actions.CLEAR_MOVES),this.board.clear()}}},y=P,G=(o("53e6"),Object(d["a"])(y,v,m,!1,null,"4a07789c",null)),j=G.exports,R=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"moves-record"},[o("div",{staticClass:"title"},[t._v("Запись партии")]),o("div",{staticClass:"table"},t._l(t.moves,(function(e,n){return o("div",{key:n,staticClass:"row"},[o("div",{staticClass:"cell"},[t._v(t._s(n+1)+".")]),o("div",{staticClass:"cell"},[t._v(t._s(e[0]))]),o("div",{staticClass:"cell"},[t._v(t._s(e[1]))])])})),0)])},L=[],V=(o("a434"),{name:"MovesRecord",computed:{moves:function(){var t=this.$store.getters[_.getters.GET_MOVES](),e=[];while(t.length)e.push(t.splice(0,2));return e}}}),N=V,Y=(o("b8b3"),Object(d["a"])(N,R,L,!1,null,"ea47bd2e",null)),w=Y.exports,k={name:"Game",components:{ChessBoard:j,MovesRecord:w},computed:Object(b["a"])({},Object(g["c"])({showHistory:_.getters.GET_SHOW_HISTORY}))},$=k,A=(o("b107"),Object(d["a"])($,h,p,!1,null,"5a7feb5d",null)),x=A.exports,B=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"start"},[o("div",{staticClass:"start-logo"}),o("Settings"),o("button",{staticClass:"start-button",attrs:{type:"button"},on:{click:function(e){return t.$emit("start")}}},[t._v("Начать")])],1)},q=[],W=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"settings"},[o("div",{staticClass:"settings-title"},[t._v("Режим тренировки")]),o("div",{staticClass:"toggles"},[o("ToggleButton",{attrs:{label:"Подсвечивать возможные ходы",defaultState:t.highlightMoves,locked:!t.onlyCorrectMoves},on:{toggle:t.onToggleHighlightMoves}}),o("ToggleButton",{attrs:{label:"Допускать только корректные ходы",defaultState:t.onlyCorrectMoves},on:{toggle:t.onToggleOnlyCorrectMoves}}),o("ToggleButton",{attrs:{label:"Показывать историю ходов",defaultState:t.showHistory},on:{toggle:t.onToggleShowHistory}})],1),o("div",{staticClass:"position-select"},[o("PositionSelect")],1)])},D=[],U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{staticClass:"toggle__button",class:{active:t.isActive},attrs:{for:t.id+"_button"}},[o("span",{staticClass:"toggle__label"},[t._v(t._s(t.label))]),o("input",{attrs:{type:"checkbox",disabled:t.disabled,id:t.id+"_button"},on:{click:t.onToggle}}),o("span",{staticClass:"toggle__switch"})])},F=[],J={name:"ToggleButton",props:{disabled:{type:Boolean,default:!1},label:{type:String,default:""},defaultState:{type:Boolean,default:!1},locked:{type:Boolean,default:!1}},mounted:function(){this.id=this._uid,this.currentState=this.defaultState},data:function(){return{id:null,currentState:!0}},computed:{isActive:function(){return this.currentState},enableText:function(){return this.labelEnableText},disabledText:function(){return this.labelDisableText}},methods:{onToggle:function(){this.locked||(this.currentState=!this.currentState,this.$emit("toggle",this.currentState))}},watch:{defaultState:function(){this.currentState=Boolean(this.defaultState)}}},z=J,K=(o("73aa"),Object(d["a"])(z,U,F,!1,null,"630a1fea",null)),Q=K.exports,X=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"position"},[o("div",{staticClass:"title"},[t._v("Начальная позиция")]),o("div",{staticClass:"radio-toolbar"},[o("input",{attrs:{type:"radio",id:"radioStart",name:"radioPosition",value:"start"},domProps:{checked:t.isSelected("start")}}),o("label",{attrs:{for:"radioStart"},on:{click:function(e){return t.onSelect("start")}}},[t._v("Стартовая")]),o("input",{attrs:{type:"radio",id:"radioFen",name:"radioPosition",value:"fen"},domProps:{checked:t.isSelected("fen")}}),o("label",{attrs:{for:"radioFen"},on:{click:function(e){return t.onSelect("fen")}}},[t._v("Заданная")]),o("input",{attrs:{type:"radio",id:"radioArbitrary",name:"radioPosition",value:"orange"},domProps:{checked:t.isSelected("arbitrary")}}),o("label",{attrs:{for:"radioArbitrary"},on:{click:function(e){return t.onSelect("arbitrary")}}},[t._v("Произвольная")])]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.position,expression:"position"}],staticClass:"fen-input",style:{visibility:t.isSelected("fen")?"visible":"hidden"},attrs:{placeholder:"Позиция в нотации FEN"},domProps:{value:t.position},on:{input:function(e){e.target.composing||(t.position=e.target.value)}}})])},Z=[],tt={name:"PositionSelect",computed:Object(b["a"])({},Object(g["c"])({position:_.getters.GET_POSITION,positionType:_.getters.GET_POSITION_TYPE})),methods:{isSelected:function(t){return this.positionType===t},onSelect:function(t){this.$store.dispatch(_.actions.SET_POSITION_TYPE,t)}}},et=tt,ot=(o("565e"),Object(d["a"])(et,X,Z,!1,null,"5ec4772e",null)),nt=ot.exports,st={name:"Settings",components:{ToggleButton:Q,PositionSelect:nt},computed:Object(b["a"])({},Object(g["c"])({highlightMoves:_.getters.GET_HIGHLITE_MOVES,onlyCorrectMoves:_.getters.GET_ONLY_CORRECT_MOVES,showHistory:_.getters.GET_SHOW_HISTORY})),methods:Object(b["a"])(Object(b["a"])({},Object(g["b"])({onToggleOnlyCorrectMoves:_.actions.TOGGLE_ONLY_CORRECT_MOVES,onToggleShowHistory:_.actions.TOGGLE_SHOW_HISTORY})),{},{onToggleHighlightMoves:function(){this.onlyCorrectMoves&&this.$store.dispatch(_.actions.TOGGLE_HIGHLITE_MOVES)}})},at=st,it=(o("b13b"),Object(d["a"])(at,W,D,!1,null,"3a7ae836",null)),rt=it.exports,ct={name:"Start",components:{Settings:rt}},ut=ct,lt=(o("4add"),Object(d["a"])(ut,B,q,!1,null,"f49c4702",null)),Ot=lt.exports,_t={name:"app",components:{Game:x,Start:Ot,AppHeader:f},data:function(){return{state:"start"}},computed:{isGameState:function(){return"game"===this.state},isStartState:function(){return"start"===this.state}},methods:{onStart:function(){this.state="game"},onLogoClick:function(){this.state="start"}}},St=_t,Et=(o("034f"),Object(d["a"])(St,r,c,!1,null,null,null)),dt=Et.exports,Tt=o("2909"),ft=o("ade3"),ht={highlightMoves:!0,onlyCorrectMoves:!0,showHistory:!0,moves:[],position:"",positionType:"start"},pt=Object(b["a"])({},ht),bt=(n={},Object(ft["a"])(n,_.actions.TOGGLE_HIGHLITE_MOVES,(function(t){var e=t.commit,o=t.state;e(_.actions.SET_POSITION_TYPE,"start"),e(_.mutations.SET_HIGHLITE_MOVES,!o.highlightMoves)})),Object(ft["a"])(n,_.actions.TOGGLE_ONLY_CORRECT_MOVES,(function(t){var e=t.commit,o=t.state;e(_.actions.SET_POSITION_TYPE,"start"),o.onlyCorrectMoves&&e(_.mutations.SET_HIGHLITE_MOVES,!1),e(_.mutations.SET_ONLY_CORRECT_MOVES,!o.onlyCorrectMoves)})),Object(ft["a"])(n,_.actions.TOGGLE_SHOW_HISTORY,(function(t){var e=t.commit,o=t.state;e(_.actions.SET_POSITION_TYPE,"start"),e(_.mutations.SET_SHOW_HISTORY,!o.showHistory)})),Object(ft["a"])(n,_.actions.SET_ONLY_CORRECT_MOVES,(function(t,e){var o=t.commit;o(_.mutations.SET_ONLY_CORRECT_MOVES,e)})),Object(ft["a"])(n,_.actions.UPDATE_POSITION,(function(t,e){var o=t.commit;o(_.mutations.SET_POSITION,e)})),Object(ft["a"])(n,_.actions.PUSH_MOVE,(function(t,e){var o=t.commit;o(_.mutations.PUSH_MOVE,e)})),Object(ft["a"])(n,_.actions.SET_POSITION_TYPE,(function(t,e){var o=t.commit;"start"!==e&&(o(_.mutations.SET_HIGHLITE_MOVES,!1),o(_.mutations.SET_ONLY_CORRECT_MOVES,!1),o(_.mutations.SET_SHOW_HISTORY,!1)),o(_.mutations.SET_POSITION_TYPE,e)})),Object(ft["a"])(n,_.actions.CLEAR_MOVES,(function(t){var e=t.commit;e(_.mutations.CLEAR_MOVES)})),n),gt=(s={},Object(ft["a"])(s,_.mutations.SET_HIGHLITE_MOVES,(function(t,e){t.highlightMoves=e})),Object(ft["a"])(s,_.mutations.SET_ONLY_CORRECT_MOVES,(function(t,e){t.onlyCorrectMoves=e})),Object(ft["a"])(s,_.mutations.SET_SHOW_HISTORY,(function(t,e){t.showHistory=e})),Object(ft["a"])(s,_.mutations.SET_POSITION,(function(t,e){t.position=e})),Object(ft["a"])(s,_.mutations.SET_POSITION_TYPE,(function(t,e){t.positionType=e})),Object(ft["a"])(s,_.mutations.PUSH_MOVE,(function(t,e){t.moves.push(e)})),Object(ft["a"])(s,_.mutations.CLEAR_MOVES,(function(t){t.moves=[]})),s),vt=(a={},Object(ft["a"])(a,_.getters.GET_HIGHLITE_MOVES,(function(t){var e=t.highlightMoves;return e})),Object(ft["a"])(a,_.getters.GET_ONLY_CORRECT_MOVES,(function(t){var e=t.onlyCorrectMoves;return e})),Object(ft["a"])(a,_.getters.GET_SHOW_HISTORY,(function(t){var e=t.showHistory;return e})),Object(ft["a"])(a,_.getters.GET_POSITION,(function(t){var e=t.position;return e})),Object(ft["a"])(a,_.getters.GET_POSITION_TYPE,(function(t){var e=t.positionType;return e})),Object(ft["a"])(a,_.getters.GET_MOVES,(function(t){var e=t.moves;return function(){return Object(Tt["a"])(e)}})),a),mt={state:pt,mutations:gt,actions:bt,getters:vt};i["a"].use(g["a"]);var It=new g["a"].Store({modules:{chessboard:mt}});i["a"].config.productionTip=!1,new i["a"]({store:It,render:function(t){return t(dt)}}).$mount("#app")},"6da7":function(t,e,o){"use strict";o("52f6")},"73aa":function(t,e,o){"use strict";o("bc49")},"85ec":function(t,e,o){},9980:function(t,e,o){},b107:function(t,e,o){"use strict";o("3020")},b13b:function(t,e,o){"use strict";o("baa8")},b8b3:function(t,e,o){"use strict";o("194d")},baa8:function(t,e,o){},bc49:function(t,e,o){},cf05:function(t,e,o){t.exports=o.p+"img/logo.0cf80b9c.png"},d81b:function(t,e,o){},fed0:function(t,e,o){}});
//# sourceMappingURL=app.01911bc4.js.map